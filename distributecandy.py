def candy(A):
    arr = sorted(A)
    n = len(A)
    if (len(A) == 1):
        return 1
    count = [1] * n
    for i in range(1, n - 1):
        if (A[i] > A[i - 1]):
            count[i] = count[i - 1] + 1

    for j in range(n - 1, -1, -1):
        if (A[j - 1] >= A[j] and count[j - 1] <= count[j]):
            count[j - 1] = count[j] + 1

    return sum(count)


arr = [ 54, 430, -461, 29, 350, 380, 221, 313, 231, 189, 497, -176, 492, 191, -329, 26, 474, -142, -112, -191, 239, -372, -409, -413, 402, -156, 171, -433, 232, -326, -421, -111, -138, -449, 479, -288, -160, -111, 9, -135, -243, 223, -413, -451, -372, -318, 242, -405, 10, -173, -393, 357, 298, 211, 265, -138, 437, -160, 247, 29, -118, 16, 92, 175, -366, -161, 486, 335, -359, 445, -337, -410, 166, -397, 74, 263, -199, 425, 198, -214, 394 ]

print(candy(arr))
